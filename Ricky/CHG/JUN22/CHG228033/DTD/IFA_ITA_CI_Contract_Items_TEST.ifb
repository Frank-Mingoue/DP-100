; .ifb file according to TME Phase 2 - HLFD Interface Contract Items v0.3

[Siebel Interface Manager]
       	LOG TRANSACTIONS = TRUE
	SET BASED LOGGING = TRUE
	LOG TRANSACTIONS TO FILE = TRUE
PROCESS = Import All

[Import All]
	TYPE = SHELL
	;INCLUDE = "UPDATE ITM_PROD_NAME"
	;INCLUDE = "UPDATE X_PROD_INT_ID1_ITM_TYPE_CODE"
	;INCLUDE = "UPDATE X_PROD_INT_ID2_ITM_SUB_TYPE_CODE"
	;INCLUDE = "UPDATE X_BRAND_ID_ITM_BRAND_CODE"
	INCLUDE = "Import EIM_AGREE_ITEM"



[UPDATE ITM_PROD_NAME]
	SESSION SQL = "UPDATE EIM_AGREE_ITEM SET	ITM_PROD_VEN_NAME=VEN_ACCNT.NAME,	ITM_PROD_VEN_BU =VEN_ACCNT_BU.NAME,	ITM_PROD_NAME =S_PROD_INT.NAME,	ITM_PROD_BU=PROD_BU.NAME FROM 	S_PROD_INT INNER JOIN EIM_AGREE_ITEM ON	S_PROD_INT.PART_NUM=EIM_AGREE_ITEM.ITM_INTEGRATION_ID 	INNER JOIN S_BU PROD_BU ON	S_PROD_INT.BU_ID=PROD_BU.ROW_ID	LEFT OUTER JOIN S_ORG_EXT VEN_ACCNT ON	S_PROD_INT.VENDR_OU_ID=VEN_ACCNT.ROW_ID	LEFT OUTER JOIN S_BU VEN_ACCNT_BU ON	VEN_ACCNT.BU_ID=VEN_ACCNT_BU.ROW_ID WHERE IF_ROW_BATCH_NUM BETWEEN 2000 AND 2999"
	TYPE = IMPORT
	BATCH NUMBER = 97003;dummy
	TABLE = EIM_AGREE_ITEM



[UPDATE X_PROD_INT_ID1_ITM_TYPE_CODE]
	SESSION SQL = "UPDATE EIM_AGREE_ITEM SET	IT_X_PROD_VENNAME=VEN_ACCNT.NAME,	IT_X_PROD_VEN_BU0 =VEN_ACCNT_BU.NAME,	IT_X_PROD_NAME0 =S_PROD_INT.NAME,	IT_X_ID1_PROD_BU=PROD_BU.NAME,	IT_X_ID1_PROD_BI=PROD_BU.ROW_ID FROM 	S_PROD_INT INNER JOIN EIM_AGREE_ITEM ON	S_PROD_INT.PART_NUM=EIM_AGREE_ITEM.RATELS_PRILST_TYPE	INNER JOIN S_BU PROD_BU ON	S_PROD_INT.BU_ID=PROD_BU.ROW_ID	LEFT OUTER JOIN S_ORG_EXT VEN_ACCNT ON	S_PROD_INT.VENDR_OU_ID=VEN_ACCNT.ROW_ID	LEFT OUTER JOIN S_BU VEN_ACCNT_BU ON	VEN_ACCNT.BU_ID=VEN_ACCNT_BU.ROW_ID WHERE IF_ROW_BATCH_NUM BETWEEN 2000 AND 2999"
	TYPE = IMPORT
	BATCH NUMBER = 97003;dummy
	TABLE = EIM_AGREE_ITEM 


[UPDATE X_PROD_INT_ID2_ITM_SUB_TYPE_CODE]
	SESSION SQL= "UPDATE EIM_AGREE_ITEM SET	IT_X_PROD_VENNAME0=VEN_ACCNT.NAME,	IT_X_PROD_VEN_BU01 =VEN_ACCNT_BU.NAME,	IT_X_PROD_NAME01 =S_PROD_INT.NAME,	IT_X_ID2_PROD_BU=PROD_BU.NAME,	IT_X_ID2_PROD_BI=PROD_BU.ROW_ID FROM 	S_PROD_INT INNER JOIN EIM_AGREE_ITEM ON	S_PROD_INT.PART_NUM=EIM_AGREE_ITEM.RATELS_PRI_LST 	INNER JOIN S_BU PROD_BU ON	S_PROD_INT.BU_ID=PROD_BU.ROW_ID LEFT OUTER JOIN S_ORG_EXT VEN_ACCNT ON	S_PROD_INT.VENDR_OU_ID=VEN_ACCNT.ROW_ID	LEFT OUTER JOIN S_BU VEN_ACCNT_BU ON	VEN_ACCNT.BU_ID=VEN_ACCNT_BU.ROW_ID WHERE IF_ROW_BATCH_NUM BETWEEN 2000 AND 2999"
	TYPE = IMPORT
	BATCH NUMBER = 97003;dummy
	TABLE = EIM_AGREE_ITEM 

[UPDATE X_BRAND_ID_ITM_BRAND_CODE]
	SESSION SQL= "UPDATE EIM_AGREE_ITEM SET	IT_X_PROD_VEN_NAME=VEN_ACCNT.NAME,	IT_X_PROD_VEN_BU =VEN_ACCNT_BU.NAME,	IT_X_PROD_VEN_BI =VEN_ACCNT_BU.ROW_ID,	IT_X_PROD_NAME =S_PROD_INT.NAME,	IT_X_PROD_BU=PROD_BU.NAME,	IT_X_PROD_BI=PROD_BU.ROW_ID FROM 	S_PROD_INT INNER JOIN EIM_AGREE_ITEM ON	S_PROD_INT.PART_NUM=EIM_AGREE_ITEM.RATELS_PRI_LST_BU	INNER JOIN S_BU PROD_BU ON	S_PROD_INT.BU_ID=PROD_BU.ROW_ID	LEFT OUTER JOIN S_ORG_EXT VEN_ACCNT ON	S_PROD_INT.VENDR_OU_ID=VEN_ACCNT.ROW_ID	LEFT OUTER JOIN S_BU VEN_ACCNT_BU ON	VEN_ACCNT.BU_ID=VEN_ACCNT_BU.ROW_ID WHERE IF_ROW_BATCH_NUM BETWEEN 2000 AND 2999"
	TYPE = IMPORT
	BATCH NUMBER = 97003;dummy
	TABLE = EIM_AGREE_ITEM 


[Import EIM_AGREE_ITEM]
 	TYPE = IMPORT
	;<TREATED_REQUEST Import EIM_AGREE_ITEM>SELECT ISNULL(MAX(IF_ROW_BATCH_NUM),2000) FROM EIM_AGREE_ITEM (NOLOCK) WHERE IF_ROW_BATCH_NUM BETWEEN 2000 AND 2999</REQUEST>
	;<BATCH Import EIM_AGREE_ITEM>
        BATCH = 2000-2000
	;</BATCH>
        
        ;*** Specify source table ***
        TABLE = EIM_AGREE_ITEM

        ;*** Specify destination tables ***
        ONLY BASE TABLES = S_AGREE_ITEM

	IGNORE BASE COLUMNS=S_AGREE_ITEM.RATE_LST_ID,\
			    S_AGREE_ITEM.INTEGRATION_ID


	FIXED COLUMN = ITM_BILLABLE_FLG, "N"
	FIXED COLUMN = ITM_DISCNT_SRC_CD, "N"
	FIXED COLUMN = ITM_EXCLPRICINGFLG, "N"
	FIXED COLUMN = ITM_PROMO_ITEM_FLG, "N"